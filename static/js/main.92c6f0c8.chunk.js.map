{"version":3,"sources":["components/Navbar.tsx","hooks/useBuildNumber.ts","hooks/useBuildType.ts","util/const.ts","hooks/useReleases.ts","hooks/useDownloadURL.ts","contexts/release-context.tsx","hooks/usePaginatedReleases.ts","hooks/usePageSwitcher.ts","hooks/usePaginator.ts","structs/Paginator.ts","components/Release.tsx","assets/download.png","components/PaginationController.tsx","components/Releases.tsx","components/ReleaseSidebar.tsx","App.tsx","index.tsx"],"names":["Navbar","className","to","useBuildNumber","name","created_at","useMemo","split","map","raw","parseInt","find","int","isNaN","Date","parse","BuildType","GITHUB_USERNAME","GITHUB_REPO","resolveReleases","page","a","key","cached","localStorage","getItem","JSON","fetch","artifacts","json","res","setItem","stringify","getReleaseDownloadURL","id","buildTypeForRelease","release","development","type","stable","beta","ReleaseContext","createContext","releases","total","loading","loadMore","Promise","resolve","ReleaseProvider","children","tracker","useState","setReleases","lastPage","setLastPage","setTotal","setLoading","useCallback","pageToLoad","Object","assign","reduce","acc","artifact","total_count","useLayoutEffect","values","sort","r1","r2","useReleases","Provider","value","usePaginatedReleases","length","perPage","currentPage","setCurrentPage","totalPages","Math","ceil","startIndex","stopIndex","min","nextPage","prevPage","jumpToPage","pageNumber","usePageSwitcher","paginationControllers","pageReleases","slice","useEffect","ObservablePaginator","onDerive","merge","derived","from","this","itemSize","itemsPerPage","items","observable","Paginator","derive","canGoForward","changePage","canGoBackward","pageSize","itemsInPage","item","itemIsVisible","floor","firstVisibleItem","lastVisibleItem","itemsPassed","offsetForPage","offset","Release","buildNumber","downloadURL","buildTypeDescription","describeBuildType","href","src","PaginationContext","PaginationPageButton","useContext","attr-active","toString","onClick","PaginationScrollContainer","React","memo","paginator","args","setPaginator","usePaginator","max","paginatorPage","paginatorTotalPages","showItem","attr-disabled","style","width","transform","range","prevProps","nextProps","PaginationMovementButton","direction","Consumer","onClickHandler","PaginationController","api","Releases","paginationAPI","LatestReleaseItem","description","version","attr-release-type","ReleaseSidebar","latestReleases","fromEntries","type1","release1","type2","release2","filter","index","findIndex","typeCmp","useLatestReleasesOfEachBuldType","entries","App","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.92c6f0c8.chunk.js","sourcesContent":["import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nexport default function Navbar() {\n    return (\n        <div className=\"navbar\">\n            <div className=\"navbar-content\">\n                <Link to=\"/\" className=\"navbar-brand\">BBDash</Link>\n                <Link to=\"/downloads\">Downloads</Link>\n            </div>\n        </div>\n    );\n}","import { useMemo } from \"react\";\nimport { GithubRelease } from \"./useReleases\";\n\nexport function useBuildNumber({ name, created_at }: GithubRelease): number {\n    return useMemo(() => name.split(\"-\").map(raw => parseInt(raw)).find(int => !isNaN(int)) || Date.parse(created_at), [ name ]);\n}","import { useMemo } from \"react\";\nimport { GithubRelease } from \"./useReleases\";\n\nexport enum BuildType {\n    development = \"development\",\n    beta = \"beta\",\n    stable = \"stable\"\n}\n\n/* eslint-disable */\nexport namespace BuildType {\n    export function describeBuildType(type: BuildType): string {\n        switch (type) {\n        case BuildType.stable:\n            return \"Stable Build\";\n        case BuildType.beta:\n            return \"Beta Build\";\n        case BuildType.development:\n        default:\n            return \"Development Build\";\n        }\n    }\n}\n/* eslint-enable */\n\n// eslint-disable-next-line\nexport function buildTypeForRelease(release: GithubRelease): BuildType {\n    return BuildType.development;\n}\n\nexport function useLatestReleasesOfEachBuldType(releases: GithubRelease[]): Record<BuildType, GithubRelease> {\n    return useMemo(() => Object.fromEntries(releases.map(release => [buildTypeForRelease(release), release] as [BuildType, GithubRelease]).sort(([ type1, release1 ], [ type2, release2 ]) => {\n        if (type1 !== type2) return 1;\n        return Date.parse(release1.created_at) - Date.parse(release2.created_at);\n    }).filter(([ type ], index, releases) => (\n        releases.findIndex(([ typeCmp ]) => type === typeCmp) === index\n    ))) as Record<BuildType, GithubRelease>, [releases]);\n}\n","export const GITHUB_USERNAME = \"EricRabil\";\nexport const GITHUB_REPO = \"BBDash\";","import { useCallback, useMemo, useState, useLayoutEffect } from \"react\";\nimport { GITHUB_REPO, GITHUB_USERNAME } from \"../util/const\";\n\nexport interface GithubRelease {\n    id: number;\n    node_id: string;\n    name: string;\n    size_in_bytes: number;\n    url: string;\n    archive_download_url: string;\n    expired: boolean;\n    created_at: string;\n    expires_at: string;\n    updated_at: string;\n}\n\nexport interface ReleaseTracker {\n    releases: GithubRelease[];\n    total: number;\n    loadMore: () => Promise<void>;\n    loading: boolean;\n}\n\ninterface ReleasesResponse {\n    artifacts: GithubRelease[];\n    total_count: number;\n}\n\nconst DO_CACHED = true;\n\nasync function resolveReleases(page: number): Promise<ReleasesResponse> {\n    const key = `cached-releases-${page}-${GITHUB_USERNAME}-${GITHUB_REPO}`;\n    const cached = localStorage.getItem(key);\n\n    if (DO_CACHED && cached) {\n        return JSON.parse(cached);\n    } else {\n        const artifacts = await fetch(`https://api.github.com/repos/${GITHUB_USERNAME}/${GITHUB_REPO}/actions/artifacts?page=${page}`);\n\n        const res: ReleasesResponse = await artifacts.json();\n\n        localStorage.setItem(key, JSON.stringify(res));\n        \n        return res;\n    }\n}\n\nexport function useReleases(): ReleaseTracker {\n    const [ releases, setReleases ] = useState<Record<string, GithubRelease>>({});\n    const [ lastPage, setLastPage ] = useState(0);\n    const [ total, setTotal ] = useState(0);\n    const [ loading, setLoading ] = useState(false);\n\n    const loadMore = useCallback(async () => {\n        if (loading) return;\n\n        setLoading(true);\n        const pageToLoad = lastPage + 1;\n\n        const res = await resolveReleases(pageToLoad);\n\n        setReleases(Object.assign({}, releases, res.artifacts.reduce((acc, artifact) => {\n            acc[artifact.id] = artifact;\n            return acc;\n        }, {} as Record<string, GithubRelease>)));\n        setTotal(res.total_count);\n        setLastPage(pageToLoad);\n        setLoading(false);\n    }, [releases, loading, setLoading, lastPage]);\n\n    useLayoutEffect(() => {\n        if (lastPage === 0) loadMore();\n    }, []);\n\n    const releasesArray = useMemo(() => Object.values(releases).sort((r1, r2) => Date.parse(r2.created_at) - Date.parse(r1.created_at)), [ releases ]);\n\n    return {\n        releases: releasesArray,\n        total,\n        loadMore,\n        loading\n    };\n}\n","import { GithubRelease } from \"./useReleases\";\nimport { GITHUB_REPO, GITHUB_USERNAME } from \"../util/const\";\n\nexport function getReleaseDownloadURL({ id, }: GithubRelease): string {\n    return `https://nightly.link/${GITHUB_USERNAME}/${GITHUB_REPO}/actions/artifacts/${id}.zip`;\n}","import React, { PropsWithChildren, createContext } from \"react\";\nimport { ReleaseTracker, useReleases } from \"../hooks/useReleases\";\n\nexport const ReleaseContext = createContext<ReleaseTracker>({\n    releases: [],\n    total: 0,\n    loading: true,\n    loadMore: () => Promise.resolve()\n});\n\nexport function ReleaseProvider({ children }: PropsWithChildren<{}>) {\n    const tracker = useReleases();\n\n    return (\n        <ReleaseContext.Provider value={tracker}>\n            {children}\n        </ReleaseContext.Provider>\n    );\n}","import { useContext, useEffect, useMemo } from \"react\";\nimport { GithubRelease, ReleaseTracker } from \"./useReleases\";\nimport { ReleaseContext } from \"../contexts/release-context\";\nimport { PageSwitcherAPI, usePageSwitcher } from \"./usePageSwitcher\";\n\nexport interface PaginatedReleasesAPI extends PageSwitcherAPI, Omit<ReleaseTracker, \"loadMore\"> {\n    releases: GithubRelease[];\n    total: number;\n}\n\nexport function usePaginatedReleases({ releases, total, loadMore, loading }: ReleaseTracker): PaginatedReleasesAPI {\n    const { startIndex, stopIndex, ...paginationControllers } = usePageSwitcher(total, 35);\n\n    const pageReleases = useMemo(() => releases.slice(startIndex, stopIndex), [releases, startIndex, stopIndex]);\n\n    useEffect(() => {\n        if (loading) return;\n        if (stopIndex > releases.length) {\n            loadMore();\n        }\n    }, [startIndex, releases, loading]);\n\n    return useMemo(() => Object.assign({}, paginationControllers, {\n        releases: pageReleases,\n        startIndex,\n        stopIndex,\n        total,\n        loading\n    }), [paginationControllers, pageReleases, startIndex, stopIndex, total, loading]);\n}\n\nexport function useContextuallyPaginatedReleases(): PaginatedReleasesAPI {\n    return usePaginatedReleases(useContext(ReleaseContext));\n}","import { useState, useCallback } from \"react\";\n\nexport interface PageSwitcherAPI {\n    startIndex: number;\n    stopIndex: number;\n    currentPage: number;\n    totalPages: number;\n    jumpToPage: (pageNumber: number) => void;\n    nextPage: (() => void) | null;\n    prevPage: (() => void) | null;\n}\n\nexport function usePageSwitcher(length: number, perPage: number): PageSwitcherAPI {\n    const [ currentPage, setCurrentPage ] = useState(1);\n    const totalPages = Math.ceil(length / perPage);\n\n    const startIndex = (currentPage - 1) * perPage;\n    const stopIndex = Math.min(length, startIndex + perPage);\n\n    const nextPage = useCallback(() => setCurrentPage(currentPage + 1), [currentPage, setCurrentPage]);\n    const prevPage = useCallback(() => setCurrentPage(currentPage - 1), [currentPage, setCurrentPage]);\n    const jumpToPage = useCallback((pageNumber: number) => {\n        if (pageNumber > totalPages) pageNumber = totalPages;\n        else if (pageNumber < 0) pageNumber = 0;\n\n        setCurrentPage(pageNumber);\n    }, [totalPages, setCurrentPage]);\n\n    const atStart = currentPage === 1;\n    const atEnd = currentPage === totalPages;\n\n    return {\n        startIndex,\n        stopIndex,\n        currentPage,\n        totalPages,\n        nextPage: atEnd ? null : nextPage,\n        prevPage: atStart ? null : prevPage,\n        jumpToPage\n    };\n}","import { useState } from \"react\";\nimport { Paginator } from \"../structs/Paginator\";\n\nclass ObservablePaginator extends Paginator {\n    public onDerive: ((derived: ObservablePaginator) => void) | null = null;\n\n    public static from({ itemSize, itemsPerPage, items, pageNumber, onDerive }: ObservablePaginator): ObservablePaginator {\n        const observable = new ObservablePaginator(itemSize, itemsPerPage, items, pageNumber);\n        observable.onDerive = onDerive;\n        return observable;\n    }\n\n    public derive(merge: Partial<Paginator> = {}): ObservablePaginator {\n        const derived = ObservablePaginator.from({\n            ...this,\n            ...merge\n        });\n\n        this.onDerive?.(derived);\n\n        return derived;\n    }\n}\n\nexport function usePaginator(...args: ConstructorParameters<typeof Paginator>): Paginator {\n    const [ paginator, setPaginator ] = useState<ObservablePaginator>(() => new ObservablePaginator(...args));\n\n    paginator.onDerive = setPaginator;\n\n    return paginator;\n}","/**\n * Allows the tracking and navigation of a pagination view\n */\nexport class Paginator {\n    /**\n     * Paginator uses the item size, items per page, and number of items to calculate the necessary offsets to display an item group.\n     * The page number is used to calculate the offset.\n     * \n     * @param itemSize size of each individual item\n     * @param itemsPerPage items in an item group\n     * @param items total number of items\n     * @param pageNumber current page number\n     */\n    constructor(public readonly itemSize: number, public readonly itemsPerPage: number, public readonly items: number, public readonly pageNumber: number = 0) {\n    }\n\n    /**\n     * Creates a new Paginator from an old one, with the same properties as the original\n     * @param paginator the original Paginator\n     * @returns a new Paginator with the same properties as the argument\n     */\n    public static from({ itemSize, itemsPerPage, items, pageNumber }: Paginator): Paginator {\n        return new Paginator(itemSize, itemsPerPage, items, pageNumber);\n    }\n\n    /**\n     * Creates a new Paginator with any overridden properties, and all other are the same as the current instance\n     * @param merge partial paginator to merge with the new paginator\n     * @returns a new paginator with the derived properties\n     */\n    public derive(merge: Partial<Paginator> = {}): Paginator {\n        return Paginator.from({\n            ...this,\n            ...merge\n        });\n    }\n\n    /**\n     * Derives a Paginator with the given page\n     * @param pageNumber new page number\n     * @returns derived Paginator\n     */\n    public changePage(pageNumber: number): Paginator {\n        return this.derive({ pageNumber });\n    }\n\n    /**\n     * Derives a Paginator for the next page\n     * @returns derived Paginator\n     */\n    public nextPage(): Paginator {\n        if (!this.canGoForward) return this;\n        return this.changePage(this.pageNumber + 1);\n    }\n\n    /**\n     * Derives a Paginator for the previous page\n     * @returns derived Paginator\n     */\n    public prevPage(): Paginator {\n        if (!this.canGoBackward) return this;\n        return this.changePage(this.pageNumber - 1);\n    }\n\n    /**\n     * Calculates the offset to display a page group\n     * @param page the page to calculate the offset of\n     * @returns offset to display group\n     */\n    public offsetForPage(page: number): number {\n        const baseOffset = (page - 1) * this.pageSize;\n\n        return baseOffset + (this.itemsInPage(page) * this.itemSize);\n    }\n\n    /**\n     * Derives a Paginator that includes the given item in its current page\n     * @param item item to ensure is displayed\n     * @returns derived Paginator\n     */\n    public showItem(item: number): Paginator {\n        if (this.itemIsVisible(item)) return this;\n        return this.changePage(Math.floor(item / this.itemsPerPage));\n    }\n\n    /**\n     * Determines whether the given item is visible in the current page\n     * @param item item to check for\n     * @returns true if the item is visible, false otherwise\n     */\n    public itemIsVisible(item: number): boolean {\n        return this.firstVisibleItem <= item && item <= this.lastVisibleItem;\n    }\n\n    /**\n     * Returns the number of items in a given page\n     * @param page page to check for\n     * @returns number of items in page\n     */\n    public itemsInPage(page: number): number {\n        const itemsPassed = this.itemsPerPage * page;\n        if (itemsPassed > this.items) return 0;\n        else if ((itemsPassed + this.itemsPerPage) > this.items) return this.items - itemsPassed;\n        else return this.itemsPerPage;\n    }\n\n    /**\n     * The offset needed to display the items for the current configuration\n     */\n    public get offset(): number {\n        return this.offsetForPage(this.pageNumber);\n    }\n\n    /**\n     * The size of a full page\n     */\n    public get pageSize(): number {\n        return this.itemSize * this.itemsPerPage;\n    }\n\n    /**\n     * The first visible item for the current page\n     */\n    public get firstVisibleItem(): number {\n        return (this.pageNumber * this.itemsPerPage);\n    }\n\n    /**\n     * The last visible item for the current page\n     */\n    public get lastVisibleItem(): number {\n        return Math.min(this.firstVisibleItem + (this.itemsPerPage - 1), this.items);\n    }\n\n    /**\n     * Whether the user can move forward\n     */\n    public get canGoForward(): boolean {\n        return this.lastVisibleItem !== this.items;\n    }\n\n    /**\n     * Whether the user can move backward\n     */\n    public get canGoBackward(): boolean {\n        return this.offset > 0;\n    }\n}\n","import React from \"react\";\nimport { GithubRelease } from \"../hooks/useReleases\";\nimport downloadPng from \"../assets/download.png\";\nimport { useBuildNumber, getReleaseDownloadURL, buildTypeForRelease, BuildType } from \"../hooks\";\n\nexport default function Release(release: GithubRelease) {\n    const buildNumber = useBuildNumber(release);\n    const downloadURL = getReleaseDownloadURL(release);\n    const buildTypeDescription = BuildType.describeBuildType(buildTypeForRelease(release));\n\n    return (\n        <tr>\n            <th><a href={downloadURL}>#{buildNumber}</a></th>\n            <td>{buildTypeDescription}</td>\n            <td>\n                <a href={downloadURL}>\n                    <img src={downloadPng} />\n                </a>\n            </td>\n        </tr>\n    );\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAPCAYAAADd/14OAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACFwAAAhcBZS5lVgAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAACzSURBVCiR3ZKxCcJgFIS/98cZHMAihdEBHCIGG0vByi0UHcXONgFH0CJVSHACIeACaYJnFY0YtPe6u/t48OBMEgCjqa2BLe/aFLF2AK4VDvjUM3MdZaf+CuyNQ5vdjb6B39H7wdRWTtwsCDkBkx8Hz86rmQPlF6j0auYuO+oKREDVAVVAlB11dQBFrNTEElALkollESuF1td5ooP0GoXENk90aLw16wEwMxuG7AEuCQu1ygcKSD4mPqwUrQAAAABJRU5ErkJggg==\"","import React, { createContext, ReactNode, useContext, useEffect } from \"react\";\nimport { PageSwitcherAPI, usePaginator } from \"../hooks\";\nimport range from \"lodash.range\";\n\nconst PaginationContext = createContext<PageSwitcherAPI>({\n    startIndex: 0,\n    stopIndex: 0,\n    currentPage: 1,\n    totalPages: 1,\n    jumpToPage: () => undefined,\n    nextPage: () => undefined,\n    prevPage: () => undefined\n});\n\nfunction PaginationPageButton({ pageNumber }: { pageNumber: number }) {\n    const { currentPage, jumpToPage } = useContext(PaginationContext);\n\n    return (\n        <div className=\"pagination-button\" attr-active={(currentPage === pageNumber).toString()} onClick={() => {\n            jumpToPage(pageNumber);\n        }}>\n            {pageNumber}\n        </div>\n    );\n}\n\nconst PaginationScrollContainer = React.memo(function PaginationScrollContainer({ totalPages }: { totalPages: number }) {\n    const paginator = usePaginator(23, 5, Math.max(0, totalPages - 2));\n    const { currentPage } = useContext(PaginationContext);\n    \n    const paginatorPage = Math.max(0, currentPage - 2);\n    const paginatorTotalPages = Math.max(0, totalPages - 2);\n\n    useEffect(() => {\n        paginator.derive({ items: paginatorTotalPages });\n    }, [paginatorTotalPages]);\n\n    useEffect(() => {\n        if (!paginator.itemIsVisible(paginatorPage)) {\n            paginator.showItem(paginatorPage);\n        }\n    }, [paginatorPage]);\n    \n    const { canGoBackward, canGoForward, offset } = paginator;\n\n    if (paginator.items === 0) return null;\n\n    return (\n        <div className=\"pagination-scroll-controller\">\n            <div className=\"pagination-button\" attr-disabled={(!canGoBackward).toString()} onClick={paginator.prevPage}>&#x2190;</div>\n            <div className=\"pagination-scroll-container\" style={{\n                width: `${Math.min(115, (totalPages - 2) * 23)}px`\n            }}>\n                <div className=\"pagination-main-page-buttons\" style={{\n                    transform: `translateX(-${offset}px)`\n                }}>\n                    {range(2, totalPages).map(pageNumber => (\n                        <PaginationPageButton key={pageNumber} pageNumber={pageNumber} />\n                    ))}\n                </div>\n            </div>\n            <div className=\"pagination-button\" attr-disabled={(!canGoForward).toString()} onClick={paginator.nextPage}>&#x2192;</div>\n        </div>\n    );\n}, (prevProps, nextProps) => prevProps.totalPages === nextProps.totalPages);\n\nfunction PaginationMovementButton({ direction, children }: { direction: \"prevPage\" | \"nextPage\", children: ReactNode }) {\n    return (\n        <PaginationContext.Consumer>\n            {({ [direction]: onClickHandler }) => (\n                <div className=\"pagination-button pagination-movement-button\" attr-disabled={(onClickHandler === null).toString()} onClick={() => onClickHandler?.()}>\n                    {children}\n                </div>\n            )}\n        </PaginationContext.Consumer>\n    );\n}\n\nexport default function PaginationController({ api }: { api: PageSwitcherAPI }) {\n    return (\n        <PaginationContext.Provider value={api}>\n            <div className=\"pagination-controller\">\n                <PaginationMovementButton direction=\"prevPage\">\n                    &lt; Prev\n                </PaginationMovementButton>\n                <PaginationPageButton pageNumber={1} />\n                <PaginationScrollContainer totalPages={api.totalPages} />\n                {api.totalPages > 1 ? (\n                    <PaginationPageButton pageNumber={api.totalPages} />\n                ) : null}\n                <PaginationMovementButton direction=\"nextPage\">\n                    Next &gt;\n                </PaginationMovementButton>\n            </div>\n        </PaginationContext.Provider>\n    );\n}","import React from \"react\";\nimport Release from \"./Release\";\nimport { useContextuallyPaginatedReleases } from \"../hooks\";\nimport PaginationController from \"./PaginationController\";\n\nexport default function Releases() {\n    const { releases, total, ...paginationAPI } = useContextuallyPaginatedReleases();\n\n    return (\n        <div className=\"container releases-container\">\n            <div className=\"container-header\">\n                <div className=\"container-header-left\">Versions</div>\n                <div className=\"container-header-right\">{total} listed build{releases.length === 1 ? \"\" : \"s\"}</div>\n            </div>\n            <div className=\"container-body\">\n                <PaginationController api={paginationAPI} />\n                <table>\n                    <thead>\n                        <tr>\n                            <th>Build Number</th>\n                            <th>Type</th>\n                            <th>Download</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {releases.map((release) => (\n                            <Release key={release.id} {...release} />\n                        ))}\n                    </tbody>\n                </table>\n                <div className=\"container-footer\">\n                    <PaginationController api={paginationAPI} />\n                </div>\n            </div>\n        </div>\n    );\n}","import React, { useContext } from \"react\";\nimport { ReleaseContext } from \"../contexts/release-context\";\nimport { BuildType, GithubRelease, useBuildNumber, getReleaseDownloadURL, useLatestReleasesOfEachBuldType } from \"../hooks\";\n\nfunction LatestReleaseItem({ release, type }: { release: GithubRelease, type: BuildType }) {\n    const description = BuildType.describeBuildType(type);\n    const version = useBuildNumber(release);\n\n    return (\n        <a href={getReleaseDownloadURL(release)} className=\"latest-release-item\" attr-release-type={type}>\n            <div className=\"release-item-type\">{description}</div>\n            <span>{version}</span>\n        </a>\n    );\n}\n\nexport default function ReleaseSidebar() {\n    const { releases } = useContext(ReleaseContext);\n    const latestReleases = useLatestReleasesOfEachBuldType(releases);\n\n    return (\n        <div className=\"container container-full\">\n            <div className=\"container-header\">\n                <div className=\"container-header-left\">Latest Downloads</div>\n            </div>\n\n            <div className=\"container-body\">\n                {(Object.entries(latestReleases) as unknown as [BuildType, GithubRelease][]).map(([ type, release ]) => (\n                    <LatestReleaseItem key={type} release={release} type={type} />\n                ))}\n            </div>\n        </div>\n    );\n}","import React from \"react\";\nimport Navbar from \"./components/Navbar\";\nimport Releases from \"./components/Releases\";\nimport ReleaseSidebar from \"./components/ReleaseSidebar\";\nimport { ReleaseProvider } from \"./contexts/release-context\";\nimport { Switch, Route } from \"react-router-dom\";\n\nexport default function App() {\n    return (\n        <div>\n            <Navbar />\n            <div className=\"main-content\">\n                <Switch>\n                    <Route path=\"/downloads\">\n                        <div className=\"download-page-content\">\n                            <ReleaseProvider>\n                                <Releases />\n                                <ReleaseSidebar />\n                            </ReleaseProvider>\n                        </div>\n                    </Route>\n                </Switch>\n            </div>\n        </div>\n    );\n}","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport \"./index.scss\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <Router>\n            <App />\n        </Router>\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);\n\n"],"sourceRoot":""}